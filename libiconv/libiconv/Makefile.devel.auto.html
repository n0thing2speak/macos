<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Makefile.devel</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">Makefile.devel&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment"># -*- makefile -*-
</span><span class="enscript-comment"># This is the developer's makefile, not the user's makefile.
</span><span class="enscript-comment"># Don't use it unless you know exactly what you do!
</span>
SHELL = /bin/sh
MAKE = make
AUTOCONF = autoconf-2.60
AUTOHEADER = autoheader-2.60
AUTOMAKE = automake-1.9
ACLOCAL = aclocal-1.9
GPERF = gperf
CC = gcc
CFLAGS = -O
MAN2HTML = groff -mandoc -Thtml
CP = cp
RM = rm -f


all : configures config.h.in srclib/Makefile.in config.h_vms config.h.msvc lib/config.h_vms lib/config.h.msvc include/iconv.h.build.in include/iconv.h_vms include/iconv.h.msvc-static include/iconv.h.msvc-shared lib/aliases.h lib/aliases_aix.h lib/aliases_osf1.h lib/aliases_dos.h lib/aliases_extra.h lib/flags.h lib/translit.h man/iconv.1.html man/iconv.3.html man/iconv_close.3.html man/iconv_open.3.html po/Makefile.msvc force
	cd libcharset &amp;&amp; $(<span class="enscript-reference">MAKE</span>) -f Makefile.devel all


<span class="enscript-comment"># Before making a new release:
</span><span class="enscript-comment"># - check that the encoding lists in README and man/iconv_open.3 are up to date,
</span><span class="enscript-comment"># - increment the version number in
</span><span class="enscript-comment">#     include/iconv.h.in
</span><span class="enscript-comment">#     README
</span><span class="enscript-comment">#     windows/iconv.rc
</span><span class="enscript-comment">#     djgpp/README
</span><span class="enscript-comment">#     djgpp/fnchange.lst
</span><span class="enscript-comment">#     libcharset/djgpp/README
</span><span class="enscript-comment">#     libcharset/djgpp/fnchange.lst
</span><span class="enscript-comment"># - update the version info in lib/Makefile.in,
</span><span class="enscript-comment"># - do &quot;make -f Makefile.devel&quot;.
</span>

CONFIGURES = configure
CONFIGURES_IN = configure.ac

<span class="enscript-comment">#CLISP_DIR = ..
</span><span class="enscript-comment">#m4/general.m4 : $(CLISP_DIR)/src/m4/general.m4 ; cp -p $&lt; $@-t &amp;&amp; mv $@-t $@
</span><span class="enscript-comment">#m4/proto.m4 : $(CLISP_DIR)/src/m4/proto.m4 ; cp -p $&lt; $@-t &amp;&amp; mv $@-t $@
</span><span class="enscript-comment">#m4/cp.m4 : $(CLISP_DIR)/src/m4/cp.m4 ; cp -p $&lt; $@-t &amp;&amp; mv $@-t $@
</span><span class="enscript-comment">#m4/ln.m4 : $(CLISP_DIR)/src/m4/ln.m4 ; cp -p $&lt; $@-t &amp;&amp; mv $@-t $@
</span><span class="enscript-comment">#m4/endian.m4 : $(CLISP_DIR)/src/m4/endian.m4 ; cp -p $&lt; $@-t &amp;&amp; mv $@-t $@
</span><span class="enscript-comment">#m4/libtool.m4 : $(CLISP_DIR)/src/m4/libtool.m4 ; cp -p $&lt; $@-t &amp;&amp; mv $@-t $@
</span>
aclocal.m4 : $(<span class="enscript-reference">CONFIGURES_IN</span>) m4/general.m4 m4/proto.m4 m4/cp.m4 m4/ln.m4 m4/codeset.m4 m4/eilseq.m4 m4/endian.m4 m4/glibc21.m4 m4/isc-posix.m4 m4/lcmessage.m4 m4/alloca.m4 m4/allocsa.m4 m4/canonicalize.m4 m4/eealloc.m4 m4/error.m4 m4/extensions.m4 m4/full-header-path.m4 m4/mbstate_t.m4 m4/onceonly.m4 m4/pathmax.m4 m4/readlink.m4 m4/relocatable.m4 m4/setenv.m4 m4/size_max.m4 m4/ssize_t.m4 m4/stdbool.m4 m4/stdint.m4 m4/strerror.m4 m4/strerror_r.m4 m4/unistd_h.m4 m4/unlocked-io.m4 m4/xreadlink.m4 m4/visibility.m4  m4/libtool.m4  m4/gettext.m4 m4/iconv.m4 m4/intmax.m4 m4/inttypes-h.m4 m4/inttypes_h.m4 m4/lib-ld.m4 m4/lib-link.m4 m4/lib-prefix.m4 m4/longdouble.m4 m4/longlong.m4 m4/nls.m4 m4/po.m4 m4/printf-posix.m4 m4/progtest.m4 m4/signed.m4 m4/stdint_h.m4 m4/wchar_t.m4 m4/wint_t.m4
	$(<span class="enscript-reference">ACLOCAL</span>) -I m4 --output=$@

configures : $(<span class="enscript-reference">CONFIGURES</span>)

AUTOCONF_FILES = aclocal.m4

configure : configure.ac $(<span class="enscript-reference">AUTOCONF_FILES</span>)
	$(<span class="enscript-reference">AUTOCONF</span>)

check-configures : $(<span class="enscript-reference">CONFIGURES</span>)
	set -e; for f in $(<span class="enscript-reference">CONFIGURES</span>); do bash -x -n $$f; done

config.h.in : configure.ac $(<span class="enscript-reference">AUTOCONF_FILES</span>)
	$(<span class="enscript-reference">AUTOHEADER</span>)
	touch $@


srclib/Makefile.in : srclib/Makefile.am
	$(<span class="enscript-reference">AUTOMAKE</span>) --gnits srclib/Makefile


config.h_vms : config.h.in
	sed -e 's/<span class="enscript-comment">#undef ENABLE_NLS$$/#define ENABLE_NLS 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef ENABLE_RELOCATABLE$$/#define ENABLE_RELOCATABLE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ALLOCA$$/#define HAVE_ALLOCA 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_DECL_STRERROR$$/#define HAVE_DECL_STRERROR 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_DLFCN_H$$/#define HAVE_DLFCN_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ERRNO_DECL$$/#define HAVE_ERRNO_DECL 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_GETCWD$$/#define HAVE_GETCWD 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ICONV$$/#define HAVE_ICONV 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_INTTYPES_H$$/#define HAVE_INTTYPES_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_LANGINFO_CODESET$$/#define HAVE_LANGINFO_CODESET 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_LIMITS_H$$/#define HAVE_LIMITS_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_LOCALE_H$$/#define HAVE_LOCALE_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MBRTOWC$$/#define HAVE_MBRTOWC 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MBSINIT$$/#define HAVE_MBSINIT 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MEMMOVE$$/#define HAVE_MEMMOVE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MEMORY_H$$/#define HAVE_MEMORY_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SETENV$$/#define HAVE_SETENV 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SETLOCALE$$/#define HAVE_SETLOCALE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDBOOL_H$$/#define HAVE_STDBOOL_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDDEF_H$$/#define HAVE_STDDEF_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDLIB_H$$/#define HAVE_STDLIB_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRERROR$$/#define HAVE_STRERROR 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRINGS_H$$/#define HAVE_STRINGS_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRING_H$$/#define HAVE_STRING_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SYS_PARAM_H$$/#define HAVE_SYS_PARAM_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SYS_STAT_H$$/#define HAVE_SYS_STAT_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SYS_TYPES_H$$/#define HAVE_SYS_TYPES_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_UNISTD_H$$/#define HAVE_UNISTD_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_UNSETENV$$/#define HAVE_UNSETENV 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_VPRINTF$$/#define HAVE_VPRINTF 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_WCHAR_H$$/#define HAVE_WCHAR_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_WCRTOMB$$/#define HAVE_WCRTOMB 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef ICONV_CONST$$/#define ICONV_CONST/' \
</span>	    -e 's/<span class="enscript-comment">#undef MALLOC_0_IS_NONNULL$$/#define MALLOC_0_IS_NONNULL 0/' \
</span>	    -e 's/<span class="enscript-comment">#undef STDC_HEADERS$$/#define STDC_HEADERS 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef WORDS_LITTLEENDIAN$$/#define WORDS_LITTLEENDIAN 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef realpath$$/#define realpath rpl_realpath/' \
</span>	    -e '/<span class="enscript-comment">#undef INSTALLPREFIX$$/d' \
</span>	  &lt; $&lt; &gt; $@

config.h.msvc : config.h.in
	sed -e 's/<span class="enscript-comment">#undef ENABLE_RELOCATABLE$$/#define ENABLE_RELOCATABLE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ALLOCA$$/#define HAVE_ALLOCA 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_DECL_STRERROR$$/#define HAVE_DECL_STRERROR 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ENVIRON_DECL$$/#define HAVE_ENVIRON_DECL 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ERRNO_DECL$$/#define HAVE_ERRNO_DECL 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_GETCWD$$/#define HAVE_GETCWD 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_LIMITS_H$$/#define HAVE_LIMITS_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_LOCALE_H$$/#define HAVE_LOCALE_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MEMMOVE$$/#define HAVE_MEMMOVE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MEMORY_H$$/#define HAVE_MEMORY_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SEARCH_H$$/#define HAVE_SEARCH_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SETLOCALE$$/#define HAVE_SETLOCALE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDDEF_H$$/#define HAVE_STDDEF_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDLIB_H$$/#define HAVE_STDLIB_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRERROR$$/#define HAVE_STRERROR 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRING_H$$/#define HAVE_STRING_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SYS_STAT_H$$/#define HAVE_SYS_STAT_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SYS_TYPES_H$$/#define HAVE_SYS_TYPES_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_VPRINTF$$/#define HAVE_VPRINTF 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef MALLOC_0_IS_NONNULL$$/#define MALLOC_0_IS_NONNULL 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef STACK_DIRECTION$$/#define STACK_DIRECTION -1/' \
</span>	    -e 's/<span class="enscript-comment">#undef STDC_HEADERS$$/#define STDC_HEADERS 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef WORDS_LITTLEENDIAN$$/#define WORDS_LITTLEENDIAN 1/' \
</span>	    -e '/<span class="enscript-comment">#undef ENABLE_NLS$$/d' \
</span>	    -e '/<span class="enscript-comment">#undef INSTALLPREFIX$$/d' \
</span>	  &lt; $&lt; &gt; $@

lib/config.h_vms : lib/config.h.in
	sed -e 's/<span class="enscript-comment">#undef ENABLE_RELOCATABLE$$/#define ENABLE_RELOCATABLE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_ICONV$$/#define HAVE_ICONV 1/' \
</span>	    -e 's/<span class="enscript-comment">#define ICONV_CONST const$$/#define ICONV_CONST/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_LANGINFO_CODESET$$/#define HAVE_LANGINFO_CODESET 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_MBRTOWC$$/#define HAVE_MBRTOWC 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SETLOCALE$$/#define HAVE_SETLOCALE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDDEF_H$$/#define HAVE_STDDEF_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDLIB_H$$/#define HAVE_STDLIB_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRING_H$$/#define HAVE_STRING_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_WCRTOMB$$/#define HAVE_WCRTOMB 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef WORDS_LITTLEENDIAN$$/#define WORDS_LITTLEENDIAN 1/' \
</span>	    -e '/<span class="enscript-comment">#undef INSTALLPREFIX$$/d' \
</span>	  &lt; $&lt; &gt; $@

lib/config.h.msvc : lib/config.h.in
	sed -e 's/<span class="enscript-comment">#undef ENABLE_RELOCATABLE$$/#define ENABLE_RELOCATABLE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_SETLOCALE$$/#define HAVE_SETLOCALE 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDDEF_H$$/#define HAVE_STDDEF_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STDLIB_H$$/#define HAVE_STDLIB_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef HAVE_STRING_H$$/#define HAVE_STRING_H 1/' \
</span>	    -e 's/<span class="enscript-comment">#undef WORDS_LITTLEENDIAN$$/#define WORDS_LITTLEENDIAN 1/' \
</span>	    -e '/<span class="enscript-comment">#undef INSTALLPREFIX$$/d' \
</span>	  &lt; $&lt; &gt; $@

include/iconv.h.build.in : include/iconv.h.in include/export.h
	sed -e 's/extern \([^<span class="enscript-string">&quot;]\)/extern LIBICONV_DLL_EXPORTED \1/' \
	    -e '/_LIBICONV_VERSION/r include/export.h' \
	  &lt; $&lt; &gt; $@

include/iconv.h_vms : include/iconv.h.in
	sed -e 's/@ICONV_CONST@//g' -e 's/@HAVE_WCHAR_T@/1/g' \
	    -e 's/ @DLL_VARIABLE@//g' \
	  &lt; $&lt; &gt; $@

include/iconv.h.msvc-static : include/iconv.h.in
	sed -e 's/@ICONV_CONST@/const/g' -e 's/@HAVE_WCHAR_T@/1/g' \
	    -e 's/ @DLL_VARIABLE@//g' \
	  &lt; $&lt; &gt; $@

include/iconv.h.msvc-shared : include/iconv.h.in windows/dllexport.h
	sed -e 's/@ICONV_CONST@/const/g' -e 's/@HAVE_WCHAR_T@/1/g' \
	    -e 's/ @DLL_VARIABLE@//g' \
	    -e 's/extern \([^&quot;</span>]\)/extern LIBICONV_DLL_EXPORTED \1/' \
	    -e '/_LIBICONV_VERSION/r windows/dllexport.h' \
	  &lt; $&lt; &gt; $@


lib/aliases.h lib/canonical.h lib/canonical_local.h : lib/encodings.def lib/encodings_local.def lib/genaliases.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) lib/genaliases.c -o genaliases
	./genaliases &gt; lib/aliases.gperf 3&gt; canonical.sh 4&gt; canonical_local.sh
	$(<span class="enscript-reference">RM</span>) genaliases
	$(<span class="enscript-reference">GPERF</span>) -m 10 lib/aliases.gperf &gt; tmp.h
	$(<span class="enscript-reference">CP</span>) tmp.h lib/aliases.h
	sh canonical.sh &gt; lib/canonical.h
	sh canonical_local.sh &gt; lib/canonical_local.h
	$(<span class="enscript-reference">RM</span>) tmp.h canonical.sh canonical_local.sh

lib/aliases_aix.h lib/canonical_aix.h : lib/encodings_aix.def lib/genaliases2.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) -DUSE_AIX lib/genaliases2.c -o genaliases
	./genaliases aix &gt; lib/aliases_aix.h 3&gt; lib/canonical_aix.h
	$(<span class="enscript-reference">RM</span>) genaliases

lib/aliases_osf1.h lib/canonical_osf1.h : lib/encodings_osf1.def lib/genaliases2.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) -DUSE_OSF1 lib/genaliases2.c -o genaliases
	./genaliases osf1 &gt; lib/aliases_osf1.h 3&gt; lib/canonical_osf1.h
	$(<span class="enscript-reference">RM</span>) genaliases

lib/aliases_dos.h lib/canonical_dos.h : lib/encodings_dos.def lib/genaliases2.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) -DUSE_DOS lib/genaliases2.c -o genaliases
	./genaliases dos &gt; lib/aliases_dos.h 3&gt; lib/canonical_dos.h
	$(<span class="enscript-reference">RM</span>) genaliases

lib/aliases_extra.h lib/canonical_extra.h : lib/encodings_extra.def lib/genaliases2.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) -DUSE_EXTRA lib/genaliases2.c -o genaliases
	./genaliases extra &gt; lib/aliases_extra.h 3&gt; lib/canonical_extra.h
	$(<span class="enscript-reference">RM</span>) genaliases


lib/flags.h : lib/encodings.def lib/encodings_aix.def lib/encodings_osf1.def lib/encodings_dos.def lib/encodings_extra.def lib/converters.h lib/genflags.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) lib/genflags.c -o genflags
	./genflags &gt; lib/flags.h
	$(<span class="enscript-reference">RM</span>) genflags


lib/translit.h : lib/translit.def lib/gentranslit.c
	$(<span class="enscript-reference">CC</span>) $(<span class="enscript-reference">CFLAGS</span>) lib/gentranslit.c -o gentranslit
	ulimit -s unlimited; ./gentranslit &lt; lib/translit.def &gt; lib/translit.h
	$(<span class="enscript-reference">RM</span>) gentranslit


man/%.html : man/%
	$(<span class="enscript-reference">MAN2HTML</span>) $&lt; &gt; $@


po/Makefile.msvc : po/LINGUAS
	ALL_LINGUAS=<span class="enscript-string">`sed -e '/^#/d' po/LINGUAS`</span>; \
	GMOFILES=; for lang in $$ALL_LINGUAS; do GMOFILES=<span class="enscript-string">&quot;$$GMOFILES $$lang.gmo&quot;</span>; done; \
	$(<span class="enscript-reference">SHELL</span>) po/Makefile.msvc.sh libiconv <span class="enscript-string">&quot;$$GMOFILES&quot;</span> &gt; po/Makefile.msvc


force :
</pre>
<hr />
</body></html>