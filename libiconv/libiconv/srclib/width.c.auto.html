<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>width.c</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">width.c&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/* Determine display width of Unicode character.
   Copyright (C) 2001-2002 Free Software Foundation, Inc.
   Written by Bruno Haible &lt;<a href="mailto:bruno@clisp.org">bruno@clisp.org</a>&gt;, 2002.

   This program is free software; you can redistribute it and/or modify it
   under the terms of the GNU Library General Public License as published
   by the Free Software Foundation; either version 2, or (at your option)
   any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   Library General Public License for more details.

   You should have received a copy of the GNU Library General Public
   License along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
   USA.  */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">HAVE_CONFIG_H</span>
# <span class="enscript-reference">include</span> <span class="enscript-string">&lt;config.h&gt;</span>
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/* Specification.  */</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&quot;uniwidth.h&quot;</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&quot;cjk.h&quot;</span>

<span class="enscript-comment">/*
 * Non-spacing attribute table.
 * Consists of:
 * - Non-spacing characters; generated from PropList.txt or
 *   &quot;grep '^[^;]*;[^;]*;[^;]*;[^;]*;NSM;' UnicodeData.txt&quot;
 * - Format control characters; generated from
 *   &quot;grep '^[^;]*;[^;]*;Cf;' UnicodeData.txt&quot;
 * - Zero width characters; generated from
 *   &quot;grep '^[^;]*;ZERO WIDTH ' UnicodeData.txt&quot;
 */</span>
<span class="enscript-type">static</span> <span class="enscript-type">const</span> <span class="enscript-type">unsigned</span> <span class="enscript-type">char</span> nonspacing_table_data[16*64] = {
  <span class="enscript-comment">/* 0x0000-0x01ff */</span>
  0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0000-0x003f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, <span class="enscript-comment">/* 0x0040-0x007f */</span>
  0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0080-0x00bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x00c0-0x00ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0100-0x013f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0140-0x017f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0180-0x01bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x01c0-0x01ff */</span>
  <span class="enscript-comment">/* 0x0200-0x03ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0200-0x023f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0240-0x027f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0280-0x02bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x02c0-0x02ff */</span>
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, <span class="enscript-comment">/* 0x0300-0x033f */</span>
  0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, <span class="enscript-comment">/* 0x0340-0x037f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0380-0x03bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x03c0-0x03ff */</span>
  <span class="enscript-comment">/* 0x0400-0x05ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0400-0x043f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0440-0x047f */</span>
  0x78, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0480-0x04bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x04c0-0x04ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0500-0x053f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0540-0x057f */</span>
  0x00, 0x00, 0xfe, 0xff, 0xfb, 0xff, 0xff, 0xbb, <span class="enscript-comment">/* 0x0580-0x05bf */</span>
  0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x05c0-0x05ff */</span>
  <span class="enscript-comment">/* 0x0600-0x07ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0600-0x063f */</span>
  0x00, 0xf8, 0x3f, 0x00, 0x00, 0x00, 0x01, 0x00, <span class="enscript-comment">/* 0x0640-0x067f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0680-0x06bf */</span>
  0x00, 0x00, 0xc0, 0xff, 0x9f, 0x3d, 0x00, 0x00, <span class="enscript-comment">/* 0x06c0-0x06ff */</span>
  0x00, 0x80, 0x02, 0x00, 0x00, 0x00, 0xff, 0xff, <span class="enscript-comment">/* 0x0700-0x073f */</span>
  0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0740-0x077f */</span>
  0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0x01, 0x00, <span class="enscript-comment">/* 0x0780-0x07bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x07c0-0x07ff */</span>
  <span class="enscript-comment">/* 0x0800-0x09ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0800-0x083f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0840-0x087f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0880-0x08bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x08c0-0x08ff */</span>
  0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, <span class="enscript-comment">/* 0x0900-0x093f */</span>
  0xfe, 0x21, 0x1e, 0x00, 0x0c, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0940-0x097f */</span>
  0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, <span class="enscript-comment">/* 0x0980-0x09bf */</span>
  0x1e, 0x20, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x09c0-0x09ff */</span>
  <span class="enscript-comment">/* 0x0a00-0x0bff */</span>
  0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, <span class="enscript-comment">/* 0x0a00-0x0a3f */</span>
  0x86, 0x39, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, <span class="enscript-comment">/* 0x0a40-0x0a7f */</span>
  0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, <span class="enscript-comment">/* 0x0a80-0x0abf */</span>
  0xbe, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0ac0-0x0aff */</span>
  0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x90, <span class="enscript-comment">/* 0x0b00-0x0b3f */</span>
  0x0e, 0x20, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0b40-0x0b7f */</span>
  0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0b80-0x0bbf */</span>
  0x01, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0bc0-0x0bff */</span>
  <span class="enscript-comment">/* 0x0c00-0x0dff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, <span class="enscript-comment">/* 0x0c00-0x0c3f */</span>
  0xc1, 0x3d, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0c40-0x0c7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, <span class="enscript-comment">/* 0x0c80-0x0cbf */</span>
  0x40, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0cc0-0x0cff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0d00-0x0d3f */</span>
  0x0e, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0d40-0x0d7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0d80-0x0dbf */</span>
  0x00, 0x04, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0dc0-0x0dff */</span>
  <span class="enscript-comment">/* 0x0e00-0x0fff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf2, 0x07, <span class="enscript-comment">/* 0x0e00-0x0e3f */</span>
  0x80, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0e40-0x0e7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf2, 0x1b, <span class="enscript-comment">/* 0x0e80-0x0ebf */</span>
  0x00, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0ec0-0x0eff */</span>
  0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0xa0, 0x02, <span class="enscript-comment">/* 0x0f00-0x0f3f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x7f, <span class="enscript-comment">/* 0x0f40-0x0f7f */</span>
  0xdf, 0x00, 0xff, 0xfe, 0xff, 0xff, 0xff, 0x1f, <span class="enscript-comment">/* 0x0f80-0x0fbf */</span>
  0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x0fc0-0x0fff */</span>
  <span class="enscript-comment">/* 0x1000-0x11ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xc5, 0x02, <span class="enscript-comment">/* 0x1000-0x103f */</span>
  0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1040-0x107f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1080-0x10bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x10c0-0x10ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1100-0x113f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1140-0x117f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1180-0x11bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x11c0-0x11ff */</span>
  <span class="enscript-comment">/* 0x1600-0x17ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1600-0x163f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1640-0x167f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1680-0x16bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x16c0-0x16ff */</span>
  0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x1c, 0x00, <span class="enscript-comment">/* 0x1700-0x173f */</span>
  0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x0c, 0x00, <span class="enscript-comment">/* 0x1740-0x177f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3f, <span class="enscript-comment">/* 0x1780-0x17bf */</span>
  0x40, 0xfe, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x17c0-0x17ff */</span>
  <span class="enscript-comment">/* 0x1800-0x19ff */</span>
  0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1800-0x183f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1840-0x187f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, <span class="enscript-comment">/* 0x1880-0x18bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x18c0-0x18ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1900-0x193f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1940-0x197f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1980-0x19bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x19c0-0x19ff */</span>
  <span class="enscript-comment">/* 0x2000-0x21ff */</span>
  0x00, 0xf8, 0x00, 0x00, 0x00, 0x7c, 0x00, 0x00, <span class="enscript-comment">/* 0x2000-0x203f */</span>
  0x00, 0x00, 0x00, 0x00, 0x0f, 0xfc, 0x00, 0x00, <span class="enscript-comment">/* 0x2040-0x207f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x2080-0x20bf */</span>
  0x00, 0x00, 0xff, 0xff, 0xff, 0x07, 0x00, 0x00, <span class="enscript-comment">/* 0x20c0-0x20ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x2100-0x213f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x2140-0x217f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x2180-0x21bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x21c0-0x21ff */</span>
  <span class="enscript-comment">/* 0x3000-0x31ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x00, <span class="enscript-comment">/* 0x3000-0x303f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x3040-0x307f */</span>
  0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x3080-0x30bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x30c0-0x30ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x3100-0x313f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x3140-0x317f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x3180-0x31bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x31c0-0x31ff */</span>
  <span class="enscript-comment">/* 0xfa00-0xfbff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfa00-0xfa3f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfa40-0xfa7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfa80-0xfabf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfac0-0xfaff */</span>
  0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfb00-0xfb3f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfb40-0xfb7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfb80-0xfbbf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfbc0-0xfbff */</span>
  <span class="enscript-comment">/* 0xfe00-0xffff */</span>
  0xff, 0xff, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfe00-0xfe3f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfe40-0xfe7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xfe80-0xfebf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, <span class="enscript-comment">/* 0xfec0-0xfeff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xff00-0xff3f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xff40-0xff7f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0xff80-0xffbf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, <span class="enscript-comment">/* 0xffc0-0xffff */</span>
  <span class="enscript-comment">/* 0x1d000-0x1d1ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1d000-0x1d03f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1d040-0x1d07f */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1d080-0x1d0bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1d0c0-0x1d0ff */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, <span class="enscript-comment">/* 0x1d100-0x1d13f */</span>
  0x00, 0x00, 0x00, 0x00, 0x80, 0x03, 0x00, 0xf8, <span class="enscript-comment">/* 0x1d140-0x1d17f */</span>
  0xe7, 0x0f, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00, <span class="enscript-comment">/* 0x1d180-0x1d1bf */</span>
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00  <span class="enscript-comment">/* 0x1d1c0-0x1d1ff */</span>
};
<span class="enscript-type">static</span> <span class="enscript-type">const</span> <span class="enscript-type">signed</span> <span class="enscript-type">char</span> nonspacing_table_ind[240] = {
   0,  1,  2,  3,  4,  5,  6,  7, <span class="enscript-comment">/* 0x0000-0x0fff */</span>
   8, -1, -1,  9, 10, -1, -1, -1, <span class="enscript-comment">/* 0x1000-0x1fff */</span>
  11, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x2000-0x2fff */</span>
  12, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x3000-0x3fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x4000-0x4fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x5000-0x5fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x6000-0x6fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x7000-0x7fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x8000-0x8fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x9000-0x9fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0xa000-0xafff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0xb000-0xbfff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0xc000-0xcfff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0xd000-0xdfff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0xe000-0xefff */</span>
  -1, -1, -1, -1, -1, 13, -1, 14, <span class="enscript-comment">/* 0xf000-0xffff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x10000-0x10fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x11000-0x11fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x12000-0x12fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x13000-0x13fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x14000-0x14fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x15000-0x15fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x16000-0x16fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x17000-0x17fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x18000-0x18fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x19000-0x19fff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x1a000-0x1afff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x1b000-0x1bfff */</span>
  -1, -1, -1, -1, -1, -1, -1, -1, <span class="enscript-comment">/* 0x1c000-0x1cfff */</span>
  15, -1, -1, -1, -1, -1, -1, -1  <span class="enscript-comment">/* 0x1d000-0x1dfff */</span>
};

<span class="enscript-comment">/* Determine number of column positions required for UC.  */</span>
<span class="enscript-type">int</span>
<span class="enscript-function-name">uc_width</span> (ucs4_t uc, <span class="enscript-type">const</span> <span class="enscript-type">char</span> *encoding)
{
  <span class="enscript-comment">/* Test for non-spacing or control character.  */</span>
  <span class="enscript-keyword">if</span> ((uc &gt;&gt; 9) &lt; 240)
    {
      <span class="enscript-type">int</span> ind = nonspacing_table_ind[uc &gt;&gt; 9];
      <span class="enscript-keyword">if</span> (ind &gt;= 0)
	<span class="enscript-keyword">if</span> ((nonspacing_table_data[64*ind + ((uc &gt;&gt; 3) &amp; 63)] &gt;&gt; (uc &amp; 7)) &amp; 1)
	  {
	    <span class="enscript-keyword">if</span> (uc &gt; 0 &amp;&amp; uc &lt; 0x100)
	      <span class="enscript-keyword">return</span> -1;
	    <span class="enscript-keyword">else</span>
	      <span class="enscript-keyword">return</span> 0;
	  }
    }
  <span class="enscript-keyword">else</span> <span class="enscript-keyword">if</span> ((uc &gt;&gt; 9) == (0xe0000 &gt;&gt; 9))
    {
      <span class="enscript-keyword">if</span> (uc &gt;= 0xe0020 ? uc &lt;= 0xe007f : uc == 0xe0001)
	<span class="enscript-keyword">return</span> 0;
    }
  <span class="enscript-comment">/* Test for double-width character.
   * Generated from &quot;grep '^....;[WF]' EastAsianWidth.txt&quot;
   * and            &quot;grep '^....;[^WF]' EastAsianWidth.txt&quot;
   */</span>
  <span class="enscript-keyword">if</span> (uc &gt;= 0x1100
      &amp;&amp; ((uc &lt; 0x1160) <span class="enscript-comment">/* Hangul Jamo */</span>
	  || (uc &gt;= 0x2e80 &amp;&amp; uc &lt; 0xa4d0  <span class="enscript-comment">/* CJK ... Yi */</span>
	      &amp;&amp; !(uc == 0x303f))
	  || (uc &gt;= 0xac00 &amp;&amp; uc &lt; 0xd7a4) <span class="enscript-comment">/* Hangul Syllables */</span>
	  || (uc &gt;= 0xf900 &amp;&amp; uc &lt; 0xfb00) <span class="enscript-comment">/* CJK Compatibility Ideographs */</span>
	  || (uc &gt;= 0xfe30 &amp;&amp; uc &lt; 0xfe70) <span class="enscript-comment">/* CJK Compatibility Forms */</span>
	  || (uc &gt;= 0xff00 &amp;&amp; uc &lt; 0xff61) <span class="enscript-comment">/* Fullwidth Forms */</span>
	  || (uc &gt;= 0xffe0 &amp;&amp; uc &lt; 0xffe7)
	  || (uc &gt;= 0x20000 &amp;&amp; uc &lt;= 0x2a6d6) <span class="enscript-comment">/* CJK */</span>
	  || (uc &gt;= 0x2f800 &amp;&amp; uc &lt;= 0x2fa1d) <span class="enscript-comment">/* CJK Compatibility Ideographs */</span>
     )   )
    <span class="enscript-keyword">return</span> 2;
  <span class="enscript-comment">/* In ancient CJK encodings, Cyrillic and most other characters are
     double-width as well.  */</span>
  <span class="enscript-keyword">if</span> (uc &gt;= 0x00A1 &amp;&amp; uc &lt; 0xFF61 &amp;&amp; uc != 0x20A9
      &amp;&amp; is_cjk_encoding (encoding))
    <span class="enscript-keyword">return</span> 2;
  <span class="enscript-keyword">return</span> 1;
}
</pre>
<hr />
</body></html>