<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>lib-ld.m4</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">lib-ld.m4&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment"># lib-ld.m4 serial 3 (gettext-0.13)
</span><span class="enscript-comment">dnl Copyright (C) 1996-2003 Free Software Foundation, Inc.
</span><span class="enscript-comment">dnl This file is free software; the Free Software Foundation
</span><span class="enscript-comment">dnl gives unlimited permission to copy and/or distribute it,
</span><span class="enscript-comment">dnl with or without modifications, as long as this notice is preserved.
</span>
<span class="enscript-comment">dnl Subroutines of libtool.m4,
</span><span class="enscript-comment">dnl with replacements s/AC_/AC_LIB/ and s/lt_cv/acl_cv/ to avoid collision
</span><span class="enscript-comment">dnl with libtool.m4.
</span>
<span class="enscript-comment">dnl From libtool-1.4. Sets the variable with_gnu_ld to yes or no.
</span>AC_DEFUN([AC_LIB_PROG_LD_GNU],
[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], acl_cv_prog_gnu_ld,
[<span class="enscript-comment"># I'd rather use --version here, but apparently some GNU ld's only accept -v.
</span>case `$LD -v 2&gt;&amp;1 &lt;/dev/null` in
*GNU* | *'with BFD'*)
  acl_cv_prog_gnu_ld=yes ;;
*)
  acl_cv_prog_gnu_ld=no ;;
esac])
with_gnu_ld=$acl_cv_prog_gnu_ld
])

<span class="enscript-comment">dnl From libtool-1.4. Sets the variable LD.
</span>AC_DEFUN([AC_LIB_PROG_LD],
[AC_ARG_WITH(gnu-ld,
[  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]],
test &quot;$withval&quot; = no || with_gnu_ld=yes, with_gnu_ld=no)
AC_REQUIRE([AC_PROG_CC])<span class="enscript-comment">dnl
</span>AC_REQUIRE([AC_CANONICAL_HOST])<span class="enscript-comment">dnl
</span><span class="enscript-comment"># Prepare PATH_SEPARATOR.
</span><span class="enscript-comment"># The user is always right.
</span>if test &quot;${PATH_SEPARATOR+set}&quot; != set; then
  echo &quot;<span class="enscript-comment">#! /bin/sh&quot; &gt;conf$$.sh
</span>  echo  &quot;exit 0&quot;   &gt;&gt;conf$$.sh
  chmod +x conf$$.sh
  if (PATH=&quot;/nonexistent;.&quot;; conf$$.sh) &gt;/dev/null 2&gt;&amp;1; then
    PATH_SEPARATOR=';'
  else
    PATH_SEPARATOR=:
  fi
  rm -f conf$$.sh
fi
ac_prog=ld
if test &quot;$GCC&quot; = yes; then
  <span class="enscript-comment"># Check if gcc -print-prog-name=ld gives a path.
</span>  AC_MSG_CHECKING([for ld used by GCC])
  case $host in
  *-*-mingw*)
    <span class="enscript-comment"># gcc leaves a trailing carriage return which upsets mingw
</span>    ac_prog=`($CC -print-prog-name=ld) 2&gt;&amp;5 | tr -d '\015'` ;;
  *)
    ac_prog=`($CC -print-prog-name=ld) 2&gt;&amp;5` ;;
  esac
  case $ac_prog in
    <span class="enscript-comment"># Accept absolute paths.
</span>    [[\\/]* | [A-Za-z]:[\\/]*)]
      [re_direlt='/[^/][^/]*/\.\./']
      <span class="enscript-comment"># Canonicalize the path of ld
</span>      ac_prog=`echo $ac_prog| sed 's%\\\\%/%g'`
      while echo $ac_prog | grep &quot;$re_direlt&quot; &gt; /dev/null 2&gt;&amp;1; do
	ac_prog=`echo $ac_prog| sed &quot;s%$re_direlt%/%&quot;`
      done
      test -z &quot;$LD&quot; &amp;&amp; LD=&quot;$ac_prog&quot;
      ;;
  &quot;&quot;)
    <span class="enscript-comment"># If it fails, then pretend we aren't using GCC.
</span>    ac_prog=ld
    ;;
  *)
    <span class="enscript-comment"># If it is relative, then search for the first ld in PATH.
</span>    with_gnu_ld=unknown
    ;;
  esac
elif test &quot;$with_gnu_ld&quot; = yes; then
  AC_MSG_CHECKING([for GNU ld])
else
  AC_MSG_CHECKING([for non-GNU ld])
fi
AC_CACHE_VAL(acl_cv_path_LD,
[if test -z &quot;$LD&quot;; then
  IFS=&quot;${IFS= 	}&quot;; ac_save_ifs=&quot;$IFS&quot;; IFS=&quot;${IFS}${PATH_SEPARATOR-:}&quot;
  for ac_dir in $PATH; do
    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
    if test -f &quot;$ac_dir/$ac_prog&quot; || test -f &quot;$ac_dir/$ac_prog$ac_exeext&quot;; then
      acl_cv_path_LD=&quot;$ac_dir/$ac_prog&quot;
      <span class="enscript-comment"># Check to see if the program is GNU ld.  I'd rather use --version,
</span>      <span class="enscript-comment"># but apparently some GNU ld's only accept -v.
</span>      <span class="enscript-comment"># Break only if it was the GNU/non-GNU ld that we prefer.
</span>      case `&quot;$acl_cv_path_LD&quot; -v 2&gt;&amp;1 &lt; /dev/null` in
      *GNU* | *'with BFD'*)
	test &quot;$with_gnu_ld&quot; != no &amp;&amp; break ;;
      *)
	test &quot;$with_gnu_ld&quot; != yes &amp;&amp; break ;;
      esac
    fi
  done
  IFS=&quot;$ac_save_ifs&quot;
else
  acl_cv_path_LD=&quot;$LD&quot; <span class="enscript-comment"># Let the user override the test with a path.
</span>fi])
LD=&quot;$acl_cv_path_LD&quot;
if test -n &quot;$LD&quot;; then
  AC_MSG_RESULT($LD)
else
  AC_MSG_RESULT(no)
fi
test -z &quot;$LD&quot; &amp;&amp; AC_MSG_ERROR([no acceptable ld found in \$PATH])
AC_LIB_PROG_LD_GNU
])
</pre>
<hr />
</body></html>