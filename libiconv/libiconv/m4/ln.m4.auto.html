<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>ln.m4</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">ln.m4&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">dnl Copyright (C) 1993-2002 Free Software Foundation, Inc.
</span><span class="enscript-comment">dnl This file is free software, distributed under the terms of the GNU
</span><span class="enscript-comment">dnl General Public License.  As a special exception to the GNU General
</span><span class="enscript-comment">dnl Public License, this file may be distributed as part of a program
</span><span class="enscript-comment">dnl that contains a configuration script generated by Autoconf, under
</span><span class="enscript-comment">dnl the same distribution terms as the rest of that program.
</span>
<span class="enscript-comment">dnl From Bruno Haible, Marcus Daniels.
</span>
AC_PREREQ(2.13)

AC_DEFUN([CL_PROG_LN],
[AC_REQUIRE([CL_PROG_CP])<span class="enscript-comment">dnl
</span>AC_CACHE_CHECK(how to make hard links, cl_cv_prog_LN, [
rm -f conftestdata conftestfile
echo data &gt; conftestfile
if ln conftestfile conftestdata 2&gt;/dev/null; then
  cl_cv_prog_LN=ln
else
  cl_cv_prog_LN=&quot;$cl_cv_prog_cp&quot;
fi
rm -f conftestdata conftestfile
])
LN=&quot;$cl_cv_prog_LN&quot;
AC_SUBST(LN)<span class="enscript-comment">dnl
</span>])

AC_DEFUN([CL_PROG_LN_S],
[AC_REQUIRE([CL_PROG_LN])<span class="enscript-comment">dnl
</span><span class="enscript-comment">dnl Make a symlink if possible; otherwise try a hard link. On filesystems
</span><span class="enscript-comment">dnl which support neither symlink nor hard link, use a plain copy.
</span>AC_MSG_CHECKING(whether ln -s works)
AC_CACHE_VAL(cl_cv_prog_LN_S, [
rm -f conftestdata
if ln -s X conftestdata 2&gt;/dev/null; then
  cl_cv_prog_LN_S=&quot;ln -s&quot;
else
  cl_cv_prog_LN_S=&quot;$cl_cv_prog_LN&quot;
fi
rm -f conftestdata
])<span class="enscript-comment">dnl
</span>if test &quot;$cl_cv_prog_LN_S&quot; = &quot;ln -s&quot;; then
  AC_MSG_RESULT(yes)
else
  AC_MSG_RESULT(no)
fi
LN_S=&quot;$cl_cv_prog_LN_S&quot;
AC_SUBST(LN_S)<span class="enscript-comment">dnl
</span>])

AC_DEFUN([CL_PROG_HLN],
[AC_REQUIRE([CL_PROG_LN_S])<span class="enscript-comment">dnl
</span><span class="enscript-comment">dnl SVR4 &quot;ln&quot; makes hard links to symbolic links, instead of resolving the
</span><span class="enscript-comment">dnl symbolic link. To avoid this, use the &quot;hln&quot; program.
</span>AC_CACHE_CHECK(how to make hard links to symlinks, cl_cv_prog_hln, [
cl_cv_prog_hln=&quot;ln&quot;
if test &quot;$cl_cv_prog_LN_S&quot; = &quot;ln -s&quot;; then
echo &quot;blabla&quot; &gt; conftest.x
ln -s conftest.x conftest.y
ln conftest.y conftest.z 2&gt;&amp;AC_FD_CC
rm -f conftest.x
if cat conftest.z &gt; /dev/null 2&gt;&amp;1 ; then
  <span class="enscript-comment"># ln is usable.
</span>  cl_cv_prog_hln=&quot;ln&quot;
else
  <span class="enscript-comment"># conftest.z is a symbolic link to the non-existent conftest.x
</span>  cl_cv_prog_hln=&quot;hln&quot;
fi
else
<span class="enscript-comment"># If there are no symbolic links, the problem cannot occur.
</span>cl_cv_prog_hln=&quot;ln&quot;
fi
rm -f conftest*
])
HLN=&quot;$cl_cv_prog_hln&quot;
AC_SUBST(HLN)<span class="enscript-comment">dnl
</span>])
</pre>
<hr />
</body></html>